/* --- General Setup & Body --- */
:root {
    --primary-color: #007bff;
    --user-msg-bg: #007bff;
    --model-msg-bg: #f1f1f1;
    --text-light: #ffffff;
    --text-dark: #333333;
}

html, body {
    height: 100%;
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #e9ebee;
    background: url('assets/page_background.png') no-repeat center center fixed;
    background-size: cover;
    
}

body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    align-items: center; /* NEU: Zentriert die Kindelemente (app-container & footer) horizontal */
    
}

#app-container {
    width: 100%;
    max-width: 1200px;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    box-sizing: border-box;
    overflow: hidden;
    height: 100%;
}

/* --- Page & View Management --- */
.page {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
.page.hidden { display: none; }
.page.active { display: flex; }

.card {
    background: white;
    padding: 2rem 3rem;
    border-radius: 15px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    text-align: center;
}

/* --- Start Page --- */
#start-page .card { 
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    overflow: hidden;
    position: relative;
    height: 75vh;
    max-height: 800px;
    
    /* Add padding to ensure text doesn't touch the sides of the card */
    padding: 0 2rem;
    text-align: center;
}

#start-page h1 {
    /* Reset margins for less space */
    margin: 0;
    font-size: clamp(2rem, 5vw, 4rem); 
}

#start-page p {
    /* Reset margins for less space */
    margin: 0;
    font-size: clamp(1rem, 2vw, 1.5rem); 
}

.start-mascot { 
    width: 60%; /* Make the width relative to the container */
    height: auto;
    max-height: 50vh; /* Set a max height relative to the viewport */
    margin-top: 2rem; 
    overflow: hidden; 
    min-height: 100px;
    object-fit: contain;
}

.flags { 
    display: flex; 
    gap: 10px; 
    flex-direction: row; 
    max-width: 100%;
}

.lang-flag img {
    height: 10vh; /* Use viewport units to scale flags */
    max-height: 100px; /* Set a max-height to prevent them from becoming too big */
}
.lang-flag { border: 3px solid transparent; border-radius: 8px; padding: 5px; cursor: pointer; background: none; transition: all 0.2s ease-in-out; }
.lang-flag:hover { border-color: var(--primary-color); transform: scale(1.1); }


/* --- Modal Overlays (T&C, Error) --- */
.agree-header-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.agree-header-row h2 {
    margin: 0;
    flex: 1 1 0;
    text-align: left;
    font-size: 1.3rem;
}

.agree-mascot {
    width: 120px;
    height: auto;
    flex-shrink: 0;
}

.agree-content {
    flex: 1 1 auto;
    min-height: 0;
    max-height: 100%;
    overflow-y: auto;
    margin-bottom: 1.5rem;
    text-align: left;
}
.agree-content ul {
    padding-left: 1.2em;
    margin: 0;
}
.agree-content li {
    margin-bottom: 0.5em;
}
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    overflow-y: auto;
}
.modal-overlay.hidden { display: none; }
.modal-content {
    background: white;
    padding: 30px;
    border-radius: 10px;
    max-width: 1200px;
    width: 100%;
    box-sizing: border-box;
    margin-left: 30px;
    margin-right: 30px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    
}

.make_center {
    align-items: center;
}

@media (max-height: 500px) {
    .modal-content {
        padding: 15px;
        max-height: 96vh;
    }
    .agree-content {
        margin-bottom: 1rem;
    }
}
.modal-content h2 { margin-top: 0; }
.modal-content button { background-color: var(--primary-color); color: white; border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; font-size: 16px; margin-top: 1rem; transition: background-color 0.2s; }
#agree-button { background-color: #28a745; }
#agree-button:hover { background-color: #218838; }
.error-mascot { width: 100px; margin-bottom: 1rem; }

/* --- Website Iframe Popup --- */
.website-content { width: 90%; height: 90%; background: #fff; border-radius: 10px; display: flex; flex-direction: column; overflow: hidden; }
.website-header { display: flex; align-items: center; padding: 10px; background: #f1f1f1; border-bottom: 1px solid #ccc; }
#website-url { flex-grow: 1; text-align: center; font-family: monospace; color: #555; }
#close-website-button { background: none; border: none; font-size: 2rem; line-height: 1; cursor: pointer; color: #888; }
#website-iframe { width: 100%; height: 100%; border: none; }

/* --- Main Chat Container --- */
#chat-container {background: white; border-radius: 15px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); overflow: hidden; position: relative; height: 95%; max-height: 95; width: 100%;}
#exit-button { position: absolute; top: 15px; left: 15px; z-index: 10; background: rgba(255, 255, 255, 0.8); border: 1px solid #ccc; color: #333; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; transition: all 0.2s; }
#exit-button:hover { background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

#my_banner_logo { position: absolute; top: 2vh; right: 3vh; z-index: 9; height: 10vh;}

.chat-header {
    width: 100%;
    height: 15vh;
    flex-shrink: 0;
    overflow: hidden;
    line-height: 0;
    position: relative;
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
}
.header-banner {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: right top;
    display: block;
}
.chat-header::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: 0;
    height: 50%;
    pointer-events: none;
    background: linear-gradient(to top, white 0%, transparent 100%);
}
.chat-window { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; width: 95%;}

/* Initial Welcome Message (inside chat window) */
.initial-welcome { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: #666; }
.initial-welcome img { width: 120px; margin-bottom: 1rem; }

/*
 * --- FIX FOR BUBBLE ALIGNMENT ---
 * The .chat-window is a column flex container.
 * By setting 'align-items' we can control the alignment of all children.
 * We set the model (bot) messages to align left ('flex-start')
 * and the user messages to align right ('flex-end'). This ensures
 * they are "fixed" to the sides as you requested.
*/
.model-message-wrapper { align-self: flex-start; }
.user-message-wrapper { align-self: flex-end; }

.message-wrapper { display: flex; align-items: flex-end; gap: 10px; max-width: 90%;}
.message { padding: 10px 15px; border-radius: 18px; line-height: 1.4; flex-grow: 1; }
.avatar {height: 60px; flex-shrink: 0; }
.user-message { background-color: var(--user-msg-bg); color: var(--text-light); border-bottom-right-radius: 4px; }
.model-message { background-color: var(--model-msg-bg); color: var(--text-dark); border-bottom-left-radius: 4px; }

/*
 * --- FIX FOR FULL-WIDTH INPUT ---
 * We ensure the container '.chat-input-area' is a flexbox.
 * By giving the input '#message-input' a 'flex-grow: 1', it will automatically
 * take up all available horizontal space left over by the send button.
*/
.chat-input-area {
    width: 95%;
    max-width: 100%;
    border-radius: 0;

    box-sizing: border-box;
    display: flex;
    padding: 10px;
    border-top: 1px solid #ddd;
    gap: 10px;
}
#message-input {
    flex-grow: 1;
    border: 1px solid #ccc;
    border-radius: 20px;
    padding: 10px 15px;
    font-size: 16px;
    outline: none;
    margin: 0;
}
#message-input:focus { border-color: var(--primary-color); }
#send-button {
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 20px;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    flex-shrink: 0;
}
#send-button:hover { opacity: 0.9; }
#send-button:disabled { background-color: #ccc; cursor: not-allowed; }

/* --- Footer Styling --- */
.app-footer {
    width: 100%;
    background-color: #f8f9fa;
    border-top: 1px solid #ddd;
    padding: 10px 20px;
    box-sizing: border-box;
    text-align: center;
    font-size: 12px;
    color: #666;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.footer-content {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 5px;
}
.footer-logo {
    height: 20px;
    margin: 0 5px;
}
.footer-links a {
    color: var(--primary-color);
    text-decoration: none;
}